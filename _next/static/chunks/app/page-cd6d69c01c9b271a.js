(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7355:(e,t,a)=>{Promise.resolve().then(a.bind(a,2441))},2441:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),n=a(6698);function l(e,t){let[a,s]=(0,r.useState)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn('Error reading localStorage key "'.concat(e,'":'),a),t}});return[a,t=>{try{let r=t instanceof Function?t(a):t;s(r),window.localStorage.setItem(e,JSON.stringify(r))}catch(t){console.warn('Error setting localStorage key "'.concat(e,'":'),t)}}]}function i(e){var t;let{onIngredientsChange:a}=e,[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[h,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(-1),[g,x]=l("pantryStaples",new Set(n.Mp)),[f,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c.trim().length>0?m(n.gE.flatMap(e=>e.ingredients).filter(e=>e.toLowerCase().includes(c.toLowerCase())&&!i.some(t=>t.name.toLowerCase()===e.toLowerCase())).slice(0,5)):m([]),p(-1)},[c,i]),(0,r.useEffect)(()=>{a([...i.filter(e=>!g.has(e.name)),...Array.from(g).map(e=>({id:"pantry-".concat(e),name:e}))])},[i,g,a]);let y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;if(!e.trim()||i.some(t=>t.name.toLowerCase()===e.toLowerCase()))return;let t=[...i,{id:Date.now().toString(),name:e.trim()}];o(t),d(""),m([]),a(t)},w=e=>{let t=i.filter(t=>t.id!==e);o(t),a(t)};return(0,s.jsxs)("div",{className:"max-w-md mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Add Ingredients"}),(0,s.jsxs)("button",{onClick:()=>b(!0),className:"text-sm px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-full text-gray-200 transition-colors flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Pantry Staples"}),(0,s.jsx)("span",{className:"bg-gray-600 px-2 py-0.5 rounded-full text-xs",children:g.size})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{if(0!==h.length)switch(e.key){case"ArrowDown":e.preventDefault(),p(e=>e<h.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),p(e=>e>-1?e-1:e);break;case"Enter":e.preventDefault(),u>=0?y(h[u]):y();break;case"Escape":m([]),p(-1)}},placeholder:"Enter an ingredient",className:"flex-1 p-2 border rounded bg-gray-800 text-white placeholder-gray-400 border-gray-700"}),(0,s.jsx)("button",{onClick:()=>y(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Add"})]}),h.length>0&&(0,s.jsx)("ul",{className:"absolute z-10 w-full bg-gray-800 border border-gray-700 rounded-md shadow-lg mt-1",children:h.map((e,t)=>(0,s.jsx)("li",{className:"px-4 py-2 cursor-pointer text-gray-100 ".concat(t===u?"bg-gray-700":"hover:bg-gray-700"),onClick:()=>y(e),onMouseEnter:()=>p(t),children:e},e))})]}),(0,s.jsx)("ul",{className:"space-y-2 mt-4",children:i.map(e=>(0,s.jsxs)("li",{className:"flex justify-between items-center p-2 bg-gray-800 rounded text-gray-100",children:[e.name,(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"✕"})]},e.id))}),f&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Pantry Staples"}),(0,s.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),null===(t=n.gE.find(e=>"Pantry Staples"===e.name))||void 0===t?void 0:t.ingredients.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-700 rounded transition-colors",children:[(0,s.jsx)("input",{type:"checkbox",checked:g.has(e),onChange:t=>{let a=new Set(g);t.target.checked?a.add(e):a.delete(e),x(a)},className:"rounded border-gray-600"}),e]},e))]})})})]})}var o=a(4633),c=a(5565);function d(e){let{recipe:t,onClose:a}=e;return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a]),(0,r.useEffect)(()=>{let e=document.createElement("style");return e.innerHTML="\n      @media print {\n        body > *:not(.recipe-print) { display: none; }\n        .recipe-print {\n          position: static !important;\n          background: white !important;\n          color: black !important;\n          padding: 20px !important;\n        }\n        .recipe-print button { display: none !important; }\n        .recipe-print img { max-height: 300px !important; }\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:a,children:(0,s.jsx)("div",{className:"recipe-print bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:t.strMeal}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("a",{href:"https://www.themealdb.com/meal/".concat(t.idMeal),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white",onClick:e=>e.stopPropagation(),children:"\uD83C\uDF10"}),(0,s.jsx)("button",{onClick:()=>{window.print()},className:"text-gray-400 hover:text-white",children:"\uD83D\uDDA8️"}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white",children:"✕"})]})]}),(0,s.jsx)(c.default,{src:t.strMealThumb,alt:t.strMeal,width:800,height:600,className:"w-full h-64 object-cover rounded-lg mb-6"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-white",children:"Instructions"}),(0,s.jsx)("div",{className:"space-y-2 text-gray-300",children:t.strInstructions.split("\n").map((e,t)=>(0,s.jsx)("p",{children:e},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-white",children:"All Ingredients"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.ingredients.map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-700 text-gray-100 rounded-full text-sm",children:e},t))})]})]})})})}let h=[{ingredients:["vegetable oil","olive oil"],matches:["oil"]},{ingredients:["chicken stock","chicken broth"],matches:["chicken stock","stock"]},{ingredients:["onion"],matches:["onion","onions","white onion","red onion"]},{ingredients:["garlic"],matches:["garlic","garlic clove","garlic cloves"]},{ingredients:["tomatoes"],matches:["tomato","tomatoes","chopped tomatoes"]},{ingredients:["pepper"],matches:["pepper","bell pepper","peppers","red pepper","green pepper"]}];function m(e,t){let a=e.toLowerCase(),s=t.toLowerCase(),r=h.find(e=>e.ingredients.includes(a));return!!(r&&r.matches.includes(s))||s.includes(a)||a.includes(s)}function u(){return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-700 animate-pulse",children:[(0,s.jsx)("div",{className:"h-48 bg-gray-700"})," ",(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-700 rounded mb-4"})," ",(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"h-4 w-32 bg-gray-700 rounded mb-2"})," ",(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-6 w-16 bg-gray-700 rounded-full"},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 w-32 bg-gray-700 rounded mb-2"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-6 w-16 bg-gray-700 rounded-full"},e))})]})]})]})}function p(e){let t,{ingredients:a}=e,[n,i]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[f,b]=(0,r.useState)("completion"),[y,w]=(0,r.useState)("all"),[v,j]=l("favoriteRecipes",[]),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(null),M=e=>e.filter(e=>a.some(t=>m(t,e))),P=e=>e.filter(e=>!a.some(t=>m(t,e))),E=(e,t)=>Math.round(e.length/t*100),L=(0,r.useCallback)(async()=>{if(0===a.length){i([]);return}p(!0),S(null);try{let e=await Promise.all(a.map(e=>(0,o.Q8)(e))),t=Array.from(new Map(e.flat().map(e=>[e.idMeal,e])).values());i(t)}catch(e){console.error("Failed to fetch recipes:",e),S("Failed to fetch recipes. Please try again.")}finally{p(!1)}},[a]);(0,r.useEffect)(()=>{L()},[a,L]);let D=(t=n,[...(N&&(t=t.filter(e=>v.includes(e.idMeal))),"all"===y)?t:t.filter(e=>e.strCategory===y)].sort((e,t)=>{if("completion"!==f)return e.strMeal.localeCompare(t.strMeal);{let a=M(e.ingredients),s=M(t.ingredients),r=E(a,e.ingredients.length);return E(s,t.ingredients.length)-r}})),T=(e,t)=>{e.stopPropagation(),j(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])};return h?(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(e=>(0,s.jsx)(u,{},e))}):0===n.length?(0,s.jsx)("div",{className:"text-center py-4",children:"No recipes found"}):C?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-red-400 mb-4",children:C}),(0,s.jsx)("button",{onClick:()=>{S(null),L()},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Try Again"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 justify-between",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:N,onChange:e=>k(e.target.checked),className:"rounded border-gray-600"}),(0,s.jsx)("span",{children:"Show Favorites Only"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"bg-gray-800 text-white border border-gray-700 rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"all",children:"All Recipes"}),(0,s.jsx)("option",{value:"Beef",children:"Beef"}),(0,s.jsx)("option",{value:"Chicken",children:"Chicken"}),(0,s.jsx)("option",{value:"Dessert",children:"Dessert"}),(0,s.jsx)("option",{value:"Lamb",children:"Lamb"}),(0,s.jsx)("option",{value:"Pasta",children:"Pasta"}),(0,s.jsx)("option",{value:"Seafood",children:"Seafood"}),(0,s.jsx)("option",{value:"Vegetarian",children:"Vegetarian"})]}),(0,s.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"bg-gray-800 text-white border border-gray-700 rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"completion",children:"Sort by Completion"}),(0,s.jsx)("option",{value:"alphabetical",children:"Sort Alphabetically"})]})]})]}),(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:D.map(e=>{let t=M(e.ingredients),a=P(e.ingredients),r=E(t,e.ingredients.length);return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-700 cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>x(e),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.default,{src:e.strMealThumb,alt:e.strMeal,width:480,height:360,className:"w-full h-48 object-cover"}),(0,s.jsx)("button",{onClick:t=>T(t,e.idMeal),className:"absolute top-2 left-2 p-2 rounded-full bg-gray-900/50 backdrop-blur-sm\n                    ".concat(v.includes(e.idMeal)?"text-yellow-400 hover:text-yellow-300":"text-gray-300 hover:text-white"," text-xl"),children:v.includes(e.idMeal)?"★":"☆"}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 bg-gray-900 text-white px-2 py-1 rounded-full text-sm",children:[r,"% complete"]})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-2 text-white",children:e.strMeal}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h4",{className:"font-semibold mb-1 text-green-400 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"✓"})," Available Ingredients (",t.length,")"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-green-900 text-green-100 rounded-full text-sm",children:e},"".concat(e,"-").concat(t)))})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("h4",{className:"font-semibold mb-1 text-red-400 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"✗"})," Missing Ingredients (",a.length,")"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:a.map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-1 bg-red-900 text-red-100 rounded-full text-sm",children:e},"".concat(e,"-").concat(t)))})]})]})]},e.idMeal)})}),g&&(0,s.jsx)(d,{recipe:g,onClose:()=>x(null)})]})}function g(){let[e,t]=(0,r.useState)([]);return(0,s.jsxs)("main",{className:"container mx-auto py-8 px-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"What can I cook?"}),(0,s.jsx)(i,{onIngredientsChange:t}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(p,{ingredients:e.map(e=>e.name)})})]})}},6698:(e,t,a)=>{"use strict";a.d(t,{Mp:()=>n,gE:()=>s,kv:()=>r});let s=[{name:"Proteins",ingredients:["Chicken","Beef","Pork","Salmon","Tuna","Eggs","Tofu","Ground Beef","Turkey Mince","Bacon"]},{name:"Vegetables",ingredients:["Onion","Garlic","Tomatoes","Potatoes","Carrots","Pepper","Broccoli","Spinach","Mushrooms","Celery","Lettuce","Cucumber","Zucchini","Sweet Potatoes","Green Beans"]},{name:"Pantry Staples",ingredients:["Salt","Black Pepper","Olive Oil","Vegetable Oil","Flour","Sugar","Rice","Pasta","Bread","Soy Sauce","Vinegar","Tomato Sauce","Chicken Stock","Onion","Water"]},{name:"Dairy",ingredients:["Milk","Butter","Cheese","Heavy Cream","Yogurt","Sour Cream","Parmesan Cheese","Cheddar Cheese"]},{name:"Herbs & Spices",ingredients:["Basil","Oregano","Thyme","Rosemary","Cumin","Paprika","Cinnamon","Chili Powder","Bay Leaves"]}],r=s.flatMap(e=>e.ingredients),n=["Salt","Black Pepper","Olive Oil","Vegetable Oil","Flour","Sugar","Onion"]},4633:(e,t,a)=>{"use strict";a.d(t,{Q8:()=>c,X1:()=>m});var s=a(6698);let r="https://www.themealdb.com/api/json/v1/1",n={};class l{async acquire(){return this.permits>0?(this.permits--,Promise.resolve()):new Promise(e=>this.queue.push(e))}release(){this.permits++;let e=this.queue.shift();e&&(this.permits--,e())}constructor(e){this.queue=[],this.permits=e}}let i=new l(2);async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=function(e){let t=n[e];return t?Date.now()-t.timestamp>3e5?(delete n[e],null):t.data:null}(e);if(a)return a;await i.acquire();try{for(let a=0;a<t;a++)try{await new Promise(e=>setTimeout(e,1e3));let t=await fetch(e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let a=await t.json();return n[e]={data:a,timestamp:Date.now()},a}catch(e){if(a===t-1)throw e;await new Promise(e=>setTimeout(e,1e3*(a+1)))}throw Error("All retries failed")}finally{i.release()}}async function c(e){try{let t=await o("".concat(r,"/filter.php?i=").concat(e));if(!t.meals)return[];let a=t.meals.slice(0,5),s=[];for(let e of a)try{let t=await d(e.idMeal);t&&s.push(t)}catch(t){console.error("Failed to fetch details for recipe ".concat(e.idMeal,":"),t)}return s}catch(e){return console.error("Failed to search recipes:",e),[]}}async function d(e){let t=await fetch("".concat(r,"/lookup.php?i=").concat(e)),a=(await t.json()).meals[0],s=[];for(let e=1;e<=20;e++){let t=a["strIngredient".concat(e)];t&&t.trim()&&s.push(t.trim())}return{idMeal:a.idMeal,strMeal:a.strMeal,strMealThumb:a.strMealThumb,strInstructions:a.strInstructions,strCategory:a.strCategory,ingredients:s}}async function h(){let e=await fetch("".concat(r,"/list.php?i=list"));return(await e.json()).meals.map(e=>e.strIngredient)}async function m(){let e=await h(),t=s.kv,a=[],r=[];return t.forEach(t=>{let s=e.filter(e=>e.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.toLowerCase()));0===s.length?a.push(t):e.includes(t)||r.push({ours:t,theirs:s})}),{missing:a,different:r}}}},e=>{var t=t=>e(e.s=t);e.O(0,[565,441,517,358],()=>t(7355)),_N_E=e.O()}]);